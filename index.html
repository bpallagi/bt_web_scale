<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>WH-C06 Bluetooth mérleg</title>
    <script type="module">
      import { WHC06 } from "https://unpkg.com/@hangtime/grip-connect?module";

      document.addEventListener("DOMContentLoaded", () => {
        const connectBtn = document.getElementById("connectBtn");
        const output = document.getElementById("output");

        connectBtn.addEventListener("click", async () => {
          const device = new WHC06();

          try {
            await device.connect();
            device.notify((data) => {
              const { value, unit, timestamp } = data;
              output.textContent = `Mért érték: ${value} ${unit} (${new Date(timestamp).toLocaleTimeString()})`;
          });
          } catch (e) {
            output.textContent = `Hiba: ${e.message}`;
          }
        });
      });
    </script>
  </head>
  <body>
    <h1>WH-C06 mérés</h1>
    <button id="connectBtn">Csatlakozás a mérleghez</button>
    <p id="output">Nincs adat</p>
  </body>
</html>
